extends layout

append head
    link(rel='stylesheet', href='/stylesheets/moderator.css')

block content
    div
        a(href="/moderator") posts
        | 
        a(href="/moderator?what=comments") comments

    if posts.length
        .mod-posts

            each post in posts
                div(class=post.is_user_post_spam ? 'spam-row' : '')
                    if post.link === null
                        a(href=`/g/${post.group_name}/${post.public_id}`)= post.title
                    else
                        a(href=post.link)= post.title

                    div
                        | by #{post.username}
                        | on #{post.created_on}
                        | to #{post.group_name}
                        | | 
                        a(href=`/g/${post.group_name}/${post.public_id}`) comments(#{post.num_comments})
                        | 
                        if user.is_super_admin
                            span(class="spam-count") +#{post.num_spam_votes}
                            | 
                            form(method="post")
                                input(type="submit" value="Remove")
                                input(type="hidden" name="remove_post_id" value=post.public_id)

                        if !post.is_user_post_spam
                            form(method="post")
                                input(type="submit" value="Spam")
                                input(type="hidden" name="spam_post_id" value=post.public_id)

                    div #{post.text_content}
    else
        span no posts
